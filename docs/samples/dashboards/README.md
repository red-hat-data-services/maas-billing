# 📊 MaaS Grafana Dashboards

This directory contains Grafana dashboard samples for the MaaS platform.

## 🚀 MaaS Token Metrics Dashboard

**File:** `maas-token-metrics-dashboard.json`

### 📋 Overview

This dashboard provides comprehensive monitoring of token usage, rate limiting, and tier-based analytics for the MaaS platform using Kuadrant/Limitador metrics.

### 🎯 Key Metrics

- **`authorized_hits`** - Total successful API calls with tier/user/model information
- **`authorized_calls`** - Rate limiting success metrics  
- **`limited_calls`** - Rate limiting block metrics
- **`tier` labels** - Free/Premium/Enterprise tier information
- **`model` labels** - Model-specific usage tracking
- **`limitador_namespace`** - Namespace filtering

### 📊 Dashboard Panels

1. **🎯 Total Authorized Hits** - Main success metric
2. **📈 Authorized Hits Rate by Tier** - Tier-based performance
3. **👥 Authorized Hits by User & Tier** - User activity
4. **🏆 Top 10 Users by Hits** - Usage leaders
5. **⏰ Hourly Authorized Hits by User** - Time-based analysis
6. **📊 Total Authorized Hits by Tier** - Tier comparison
7. **👥 Active Users** - User count
8. **💰 Top 5 Users by Cost** - Cost analysis with tier pricing
9. **📋 Detailed Metrics Table** - Complete data view

### 🔧 How to Use

1. **Import into Grafana:**
   - Go to Grafana → Dashboards → Import
   - Upload `maas-token-metrics-dashboard.json`
   - Configure Prometheus datasource (DS_PROMETHEUS)

2. **Prerequisites:**
   - Prometheus configured to scrape Limitador metrics
   - ServiceMonitor for `limitador-limitador` service deployed
   - Kuadrant policies generating metrics

3. **Features:**
   - **Tier-based filtering** - Free vs Premium vs Enterprise
   - **User activity tracking** - Individual user usage patterns
   - **Model usage analytics** - Which models are used most
   - **Rate limiting monitoring** - Success vs blocked requests
   - **Cost analysis** - Revenue tracking by tier and user
   - **Namespace filtering** - Multi-tenant scenarios

### 💰 Cost Analysis

The dashboard includes cost calculations:
- **Free Tier:** $0.005 per authorized hit
- **Premium Tier:** $0.008 per authorized hit
- **Enterprise Tier:** Custom pricing (configurable)

### 🎨 Visual Features

- **Emojis** for better visual appeal
- **Color coding** by tier (Free=Green, Premium=Blue, Enterprise=Gold)
- **Modern layout** with better spacing
- **Interactive filtering** and grouping
- **Real-time updates** (30s refresh)

### 📈 Key Insights

Monitor these important metrics:
- **Success Rate:** `authorized_calls / (authorized_calls + limited_calls)`
- **Tier Distribution:** Usage by Free/Premium/Enterprise
- **Model Popularity:** Which models are used most
- **User Activity:** Top users and their tier usage
- **Cost Analysis:** Revenue by tier and user

### 🔗 Related Documentation

- [Deployment Guide](../../README.md)
- [Token Metrics Guide](../../token-metrics.md)
- [Observability Setup](../../deployment/base/observability/)

### 🛠️ Customization

To customize the dashboard:
1. Import into Grafana
2. Edit panels as needed
3. Export updated JSON
4. Replace this file with your custom version

### 📝 Notes

- Dashboard is compatible with Kuadrant v1.3.0-rc2+
- Requires Prometheus Operator for ServiceMonitor support
- Metrics are generated by Limitador with TelemetryPolicy
- Dashboard auto-refreshes every 30 seconds
